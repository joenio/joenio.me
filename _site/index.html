<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Joenio Costa</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="">
    <link rel="canonical" href="http://joenio.me/">
    <link rel="alternate" type="application/rss+xml" title="Joenio Costa | Feed" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Custom Fonts -->
    <link rel="stylesheet" media="screen" href="http://openfontlibrary.org/face/hanken" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" media="screen" href="http://openfontlibrary.org/face/phennig" rel="stylesheet" type="text/css"/>
</head>

  
  <body>
  <header class="site-header">

  <div class="wrap">
    <a class="site-title" href="/">Joenio Costa</a>
  </div>

</header>


  <div class="page-content index">
    <div class="wrap">
      
      <div class="post">
        <header class="post-header">
          <a class="post-link" href="/desenvolvendo-noosfero-usando-containers-lxc">Desenvolvendo Noosfero usando containers LXC</a>
          <p class="meta">
Mar 5, 2016
 • tecnologia lxc noosfero
</p>

        </header>
        <article class="post-content">
        <p><img src="/files/noosfero-lxc.png" alt="Noosfero LXC" /></p>

<p>Sou desenvolvedor do projeto <a href="http://noosfero.org">Noosfero</a> a algum tempo e desde meu
<a href="http://gitlab.com/noosfero/noosfero/commit/dedffcc6a535cfe7a097770c1485e1658565e929">primeiro commit</a> em 2008 venho utilizando ambientes de
desenvolvimento variados para isolar meu sistema real do sistema onde o
Noosfero é executado, desde chroot e schroot, passando por VirtualBox e
Vagrant, chegando mais recentemente ao Linux Containers (LXC), testei o Docker
mas não gostei muito.</p>

<p>O que eu busco nestas soluções é o seguinte:</p>

<ol>
  <li>Isolar instalação de dependencias de desenvolvimento do meu sistema real</li>
  <li>Fácil de criar, destruir e recriar ambientes de desenvolvimento</li>
  <li>Mapear código-fonte entre meu sistema real e o ambiente virtual</li>
</ol>

<p>Isto quer dizer que para cada projeto tenho um ambiente “virtual” isolado, de
forma que não é necessário instalar dependencias de desenvolvimento em meu
sistema, ou que um ambiente “virtual” seja poluído com dependencias de outro
projeto, ou seja, para cada projeto tenho um ambiente “virtual” isolado.</p>

<p>Nas aventuras com o <a href="http://wiki.debian.org/LXC">LXC</a> senti necessidade de algo para simplificar e
automatizar um pouco as coisas, então comecei a escrever um pequeno shell
script e lhe dei o nome de <code>holodev</code>.</p>

<h2 id="holodev">holodev</h2>

<p><img src="/files/holodeck.gif" class="float-right" /></p>

<p>O nome <a href="http://github.com/lappis-tools/holodev">holodev</a> é uma referência à tecnologia <a href="http://en.wikipedia.org/wiki/Holodeck">Holodeck</a> do
seriado Star Trek, nela é possível criar ambientes e cenários conhecidos com um
alto nível de fidelidade e realidade a partir de um simples comando de voz.
Basta dizer: “crie o estádio Fonte Nova antes de ser implodido em 2010 em algum
jogo Bahia x Vitória” e o Holodeck cria toda a realidade, com objetos e
personagens.</p>

<p>O <code>holodev</code> é então um Holodeck para desenvolvedores de software, onde ambientes
virtuais são criados com o mínimo de esforço. Vejamos como criar um ambiente de
desenvolvimento <a href="http://gitlab.com/noosfero/noosfero/">Noosfero</a> usando <code>holodev</code> em um sistema
Debian-like.</p>

<p>Adicione o seguinte repositório ao <code>/etc/apt/sources.list</code>:</p>

<pre><code>deb http://debian.joenio.me unstable/
</code></pre>

<p>Baixe a chave do repositório e instale o pacote <code>holodev</code>:</p>

<pre class="terminal">
<code>
# wget -O - http://debian.joenio.me/signing.asc | apt-key add -
# apt-get update
# apt-get install holodev
</code>
</pre>

<p>Supondo que você já tem o código-fonte do Noosfero, entre no seu diretório e
execute o seguinte comando. (<em>é preciso ter sudo</em>)</p>

<pre class="terminal">
<code>
~/src/noosfero$ holodev create --release jessie
</code>
</pre>

<p>Isto vai (1) criar um container chamado ‘noosfero-master’ usando Debian Jessie,
(2) criar seu usuário dentro do container com o mesmo UID e (3) mapear o
código-fonte do Noosfero dentro do container. O próximo passo é entrar no
container e instalar as dependencias de desenvolvimento do Noosfero.</p>

<pre class="terminal">
<code>
~/src/noosfero$ holodev attach
</code>
</pre>

<p>Dentro do container LXC ‘noosfero-master’ execute o seguinte:</p>

<pre class="terminal">
<code>
~$ ./script/quick-start --force-install
</code>
</pre>

<p>O script <code>quick-start</code> irá instalar todas as dependencias necessárias além de
executar um setup inicial deixando tudo pronto para o Noosfero ser executado.</p>

<p>Pronto! Você tem um container LXC redondo para rodar o Noosfero, executar os
testes, abrir o console Rails, etc… Agora é só meter a mão na massa e começar
a <em>codar</em>.</p>

<p>Não sabe o que fazer? <a href="http://gitlab.com/noosfero/noosfero/issues?label_name=bug">Comece resolvendo algum bug</a>. Se precisar
de ajuda pergunte na <a href="http://listas.softwarelivre.org/cgi-bin/mailman/listinfo/noosfero-br">lista de discussão da comunidade</a>.</p>


        </article>
          <footer class="post-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var disqus_shortname = 'joenio';
      var disqus_url = 'http://joenio.me/desenvolvendo-noosfero-usando-containers-lxc';
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>
      Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
    </noscript>
  </footer>

      </div>
      
    </div>
  </div>

  <footer class="site-footer">

  <div class="wrap">

    <div class="footer-col-1 column">

      <div class="hackergotchi">
        <img src="/files/hackergotchi.png"/>
      </div>

    </div>

    <div class="footer-col-2 column">

      <p id="sobre">
        Olá, me chamo <strong>Joenio Costa</strong>, sou sócio-fundador da
        <a href="http://colivre.coop.br">Colivre</a>, especialista em
        desenvolvimento de software e tecnologias livres, consultor do projeto
        <a href="http://participa.br">Participa.br</a> liderado pela Secretaria
        Geral da Presidência da República e membro do grupo de pesquisa sobre design
        e evolução de software <a href="http://wiki.dcc.ufba.br/Aside/">aSide</a>.

        Você pode me encontrar no email
        <svg version="1.1" class="email-icon-svg" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink">
        <title/><desc/><defs/>
        <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1">
        <g fill="#929292" id="icon-6-mail-envelope-closed">
        <path d="M25.9230769,21.0769231 L20,16 L25.9230769,10.9230769 L25.9230769,10.9230769 L25.1153846,10.1153846
        L16.5,17.5 L7.88461538,10.1153846 L7.07692308,10.9230769 L7.07692308,10.9230769
        L13,16 L7.07692308,21.0769231 L7.07692308,21.0769231 L7.88461538,21.8846154
        L13.875,16.75 L16.5,19 L19.125,16.75 L25.1153846,21.8846154
        L25.9230769,21.0769231 L25.9230769,21.0769231 Z M6.00359486,8 C4.89703997,8
        4,8.89451376 4,9.99406028 L4,22.0059397 C4,23.1072288 4.88976324,24
        6.00359486,24 L26.9964051,24 C28.10296,24 29,23.1054862 29,22.0059397
        L29,9.99406028 C29,8.8927712 28.1102368,8 26.9964051,8 L6.00359486,8
        L6.00359486,8 Z" id="mail-envelope-closed"/>
        </g></g></svg>
        <a href="mailto:joenio@colivre.coop.br">joenio@colivre.coop.br</a> ou no twitter
        <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
          <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
          c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
          c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
          c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
          C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
          c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
          c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
        </svg>
        <a href="https://twitter.com/joenio">@joenio</a>.
      </p>

      <hr/>

      <p id="rss">
        <em>
        Acompanhe este blog via
        <a type="application/rss+xml" href="/feed.xml">
        feed&nbsp;
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="rss-icon-svg" id="RSSicon" viewBox="0 0 256 256">
          <defs><linearGradient x1="0.085" y1="0.085" x2="0.915" y2="0.915" id="RSSg">
          <stop offset="0.0" stop-color="#E3702D"/><stop offset="0.1071" stop-color="#EA7D31"/>
          <stop offset="0.3503" stop-color="#F69537"/><stop offset="0.5" stop-color="#FB9E3A"/>
          <stop offset="0.7016" stop-color="#EA7C31"/><stop offset="0.8866" stop-color="#DE642B"/>
          <stop offset="1.0" stop-color="#D95B29"/></linearGradient></defs>
          <rect width="256" height="256" rx="55" ry="55" x="0" y="0" fill="#CC5D15"/>
          <rect width="246" height="246" rx="50" ry="50" x="5" y="5" fill="#F49C52"/>
          <rect width="236" height="236" rx="47" ry="47" x="10" y="10" fill="url(#RSSg)"/>
          <circle cx="68" cy="189" r="24" fill="#FFF"/>
          <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="#FFF"/>
          <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="#FFF"/>
        </svg>
        <span class="rss-subscribe">RSS</span>
        </a>
        </em>
      </p>

    </div>
  </div>

</footer>

  <div class="page-content latest-posts">
  <div class="wrap">
    <ul class="posts">
      
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/contribuindo-com-projetos-de-software-livre">Contribuindo com projetos de software livre</a>
          <p class="meta">
Jan 29, 2016
 • perl
</p>

          <a href="/contribuindo-com-projetos-de-software-livre"><p><img src="/files/hacktoberfest-2015.jpg" alt="Camisa Hacktoberfest 2015" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/como-adicionar-virtualhost-aos-logs-do-varnish">Como adicionar virtualhost aos logs do Varnish</a>
          <p class="meta">
Aug 15, 2015
 • debian
</p>

          <a href="/como-adicionar-virtualhost-aos-logs-do-varnish"><p><img src="/files/trooper-segurando-caneta-fundo-verde.jpg" alt="Clone trooper segurando caneta" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/aprenda-a-criar-repositorios-de-pacotes-debian">Aprenda a criar repositórios de pacotes Debian</a>
          <p class="meta">
Jun 29, 2015
 • tecnologia debian
</p>

          <a href="/aprenda-a-criar-repositorios-de-pacotes-debian"><p><img src="/files/clone-trooper-e-wall-e-pacotes.jpg" alt="Clone trooper e wall-e empilhando pacotes" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/embarque-na-viagem-das-cooperativas-do-ano">Embarque na viagem das cooperativas do ano</a>
          <p class="meta">
Mar 29, 2015
 • colivre
</p>

          <a href="/embarque-na-viagem-das-cooperativas-do-ano"><p><img src="/files/post-viagem-premio-cooperativas.jpg" alt="Desenho intercâmbio cooperativista" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/nao-faca-hoje-o-que-pode-deixar-para-amanha">Não faça hoje o que pode deixar para amanhã</a>
          <p class="meta">
Mar 4, 2015
 • pessoal gestao
</p>

          <a href="/nao-faca-hoje-o-que-pode-deixar-para-amanha"><p><img src="/files/clone-trooper-deitado.jpg" alt="Clone Trooper Deitado" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/fui-diagnosticado-com-um-tumor-renal-e-agora">Fui diagnosticado com um tumor renal, e agora?</a>
          <p class="meta">
Dec 31, 2014
 • pessoal saude
</p>

          <a href="/fui-diagnosticado-com-um-tumor-renal-e-agora"><p><img src="/files/wall-e-tomografia.jpg" alt="Wall-e sob a tomografia computadorizada" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/backup-na-nuvem-com-tarsnap">Backup na nuvem com Tarsnap</a>
          <p class="meta">
Dec 23, 2014
 • tecnologia backup
</p>

          <a href="/backup-na-nuvem-com-tarsnap"><p><img src="/files/chewbacca-nuvem.jpg" alt="Chewbacca fazendo backup na nuvem" /></p>

</a>
        </header>
      </li>
      
      <li class="post">
        <header class="post-banner">
          <a class="post-link" href="/voltando-a-blogar">Voltando a "blogar"</a>
          <p class="meta">
Dec 18, 2014
 • pessoal
</p>

          <a href="/voltando-a-blogar"><p><img src="/files/han-solo-e-chewbacca-blog.jpg" alt="Han Solo apontando uma arma para Chewbacca" /></p>

</a>
        </header>
      </li>
      
      
    </ul>
  </div>
</div>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-31348806-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
